{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"source\", \"events\", \"contentPosition\", \"hashPlaceholderContentPosition\", \"priority\", \"style\", \"hashPlaceholderStyle\", \"tintColor\", \"className\", \"accessibilityLabel\", \"cachePolicy\"];\nvar _jsxFileName = \"/home/zoro/Projects/for-you/node_modules/expo-image/build/web/ImageWrapper.js\",\n  _this = this;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useEffect } from 'react';\nimport ColorTintFilter, { getTintColorStyle } from './ColorTintFilter';\nimport { getImageWrapperEventHandler } from './getImageWrapperEventHandler';\nimport { useHeaders, useImageHashes } from './hooks';\nimport { absoluteFilledPosition, getObjectPositionFromContentPositionObject } from './positioning';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction getFetchPriorityFromImagePriority() {\n  var priority = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'normal';\n  return priority && ['low', 'high'].includes(priority) ? priority : 'auto';\n}\nfunction getImgPropsFromSource(source) {\n  if (source && 'srcset' in source) {\n    return {\n      srcSet: source.srcset,\n      sizes: source.sizes\n    };\n  }\n  return {};\n}\nvar ImageWrapper = React.forwardRef(function (_ref, ref) {\n  var source = _ref.source,\n    events = _ref.events,\n    contentPosition = _ref.contentPosition,\n    hashPlaceholderContentPosition = _ref.hashPlaceholderContentPosition,\n    priority = _ref.priority,\n    style = _ref.style,\n    hashPlaceholderStyle = _ref.hashPlaceholderStyle,\n    tintColor = _ref.tintColor,\n    className = _ref.className,\n    accessibilityLabel = _ref.accessibilityLabel,\n    cachePolicy = _ref.cachePolicy,\n    props = _objectWithoutProperties(_ref, _excluded);\n  useEffect(function () {\n    var _events$onMount;\n    events == null ? void 0 : (_events$onMount = events.onMount) == null ? void 0 : _events$onMount.forEach(function (e) {\n      return e == null ? void 0 : e();\n    });\n  }, []);\n  var _useImageHashes = useImageHashes(source),\n    resolvedSource = _useImageHashes.resolvedSource,\n    isImageHash = _useImageHashes.isImageHash;\n  var objectPosition = getObjectPositionFromContentPositionObject(isImageHash ? hashPlaceholderContentPosition : contentPosition);\n  var sourceWithHeaders = useHeaders(resolvedSource, cachePolicy, events == null ? void 0 : events.onError);\n  if (!sourceWithHeaders) {\n    return null;\n  }\n  return _jsxDEV(_Fragment, {\n    children: [_jsxDEV(ColorTintFilter, {\n      tintColor: tintColor\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }, _this), _jsxDEV(\"img\", _objectSpread(_objectSpread(_objectSpread({\n      ref: ref,\n      alt: accessibilityLabel,\n      className: className,\n      src: (sourceWithHeaders == null ? void 0 : sourceWithHeaders.uri) || undefined,\n      style: _objectSpread(_objectSpread(_objectSpread(_objectSpread({\n        objectPosition: objectPosition\n      }, absoluteFilledPosition), getTintColorStyle(tintColor)), style), isImageHash ? hashPlaceholderStyle : {}),\n      fetchpriority: getFetchPriorityFromImagePriority(priority || 'normal')\n    }, getImageWrapperEventHandler(events, sourceWithHeaders)), getImgPropsFromSource(source)), props), source == null ? void 0 : source.uri, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true);\n});\nexport default ImageWrapper;","map":{"version":3,"names":["React","useEffect","ColorTintFilter","getTintColorStyle","getImageWrapperEventHandler","useHeaders","useImageHashes","absoluteFilledPosition","getObjectPositionFromContentPositionObject","jsxDEV","_jsxDEV","Fragment","_Fragment","getFetchPriorityFromImagePriority","priority","arguments","length","undefined","includes","getImgPropsFromSource","source","srcSet","srcset","sizes","ImageWrapper","forwardRef","_ref","ref","events","contentPosition","hashPlaceholderContentPosition","style","hashPlaceholderStyle","tintColor","className","accessibilityLabel","cachePolicy","props","_objectWithoutProperties","_excluded","_events$onMount","onMount","forEach","e","_useImageHashes","resolvedSource","isImageHash","objectPosition","sourceWithHeaders","onError","children","fileName","_jsxFileName","lineNumber","columnNumber","_this","_objectSpread","alt","src","uri","fetchpriority"],"sources":["/home/zoro/Projects/for-you/node_modules/expo-image/src/web/ImageWrapper.tsx"],"sourcesContent":["import React, { useEffect, Ref } from 'react';\n\nimport ColorTintFilter, { getTintColorStyle } from './ColorTintFilter';\nimport { ImageWrapperProps } from './ImageWrapper.types';\nimport { getImageWrapperEventHandler } from './getImageWrapperEventHandler';\nimport { useHeaders, useImageHashes } from './hooks';\nimport { absoluteFilledPosition, getObjectPositionFromContentPositionObject } from './positioning';\nimport { SrcSetSource } from './useSourceSelection';\nimport { ImageNativeProps, ImageSource } from '../Image.types';\n\nfunction getFetchPriorityFromImagePriority(priority: ImageNativeProps['priority'] = 'normal') {\n  return priority && ['low', 'high'].includes(priority) ? priority : 'auto';\n}\n\nfunction getImgPropsFromSource(source: ImageSource | SrcSetSource | null | undefined) {\n  if (source && 'srcset' in source) {\n    return {\n      srcSet: source.srcset,\n      sizes: source.sizes,\n    };\n  }\n  return {};\n}\n\nconst ImageWrapper = React.forwardRef(\n  (\n    {\n      source,\n      events,\n      contentPosition,\n      hashPlaceholderContentPosition,\n      priority,\n      style,\n      hashPlaceholderStyle,\n      tintColor,\n      className,\n      accessibilityLabel,\n      cachePolicy,\n      ...props\n    }: ImageWrapperProps,\n    ref: Ref<HTMLImageElement>\n  ) => {\n    useEffect(() => {\n      events?.onMount?.forEach((e) => e?.());\n    }, []);\n\n    // Thumbhash uri always has to start with 'thumbhash:/'\n    const { resolvedSource, isImageHash } = useImageHashes(source);\n    const objectPosition = getObjectPositionFromContentPositionObject(\n      isImageHash ? hashPlaceholderContentPosition : contentPosition\n    );\n\n    const sourceWithHeaders = useHeaders(resolvedSource, cachePolicy, events?.onError);\n    if (!sourceWithHeaders) {\n      return null;\n    }\n    return (\n      <>\n        <ColorTintFilter tintColor={tintColor} />\n        <img\n          ref={ref}\n          alt={accessibilityLabel}\n          className={className}\n          src={sourceWithHeaders?.uri || undefined}\n          key={source?.uri}\n          style={{\n            objectPosition,\n            ...absoluteFilledPosition,\n            ...getTintColorStyle(tintColor),\n            ...style,\n            ...(isImageHash ? hashPlaceholderStyle : {}),\n          }}\n          // @ts-ignore\n          // eslint-disable-next-line react/no-unknown-property\n          fetchpriority={getFetchPriorityFromImagePriority(priority || 'normal')}\n          {...getImageWrapperEventHandler(events, sourceWithHeaders)}\n          {...getImgPropsFromSource(source)}\n          {...props}\n        />\n      </>\n    );\n  }\n);\n\nexport default ImageWrapper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}